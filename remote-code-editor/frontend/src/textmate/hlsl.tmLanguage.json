{
  "name": "HLSL",
  "scopeName": "source.hlsl",
  "fileTypes": ["hlsl", "fx", "fxh", "hlsli", "shader", "cg", "cginc", "compute"],
  "patterns": [
    {"include": "#comments"},
    {"include": "#preprocessor"},
    {"include": "#semantics"},
    {"include": "#struct_definition"},
    {"include": "#function_definition"},
    {"include": "#keywords"},
    {"include": "#types"},
    {"include": "#constants"},
    {"include": "#operators"},
    {"include": "#numbers"},
    {"include": "#strings"}
  ],
  "repository": {
    "comments": {
      "patterns": [
        {
          "name": "comment.line.double-slash.hlsl",
          "match": "//.*$"
        },
        {
          "name": "comment.block.hlsl",
          "begin": "/\\*",
          "end": "\\*/"
        }
      ]
    },
    "preprocessor": {
      "patterns": [
        {
          "name": "meta.preprocessor.hlsl",
          "match": "^\\s*#\\s*(define|undef|if|ifdef|ifndef|else|elif|endif|error|pragma|include|line)\\b"
        },
        {
          "name": "meta.preprocessor.unity.hlsl",
          "match": "\\b(CGPROGRAM|ENDCG|CGINCLUDE|HLSLPROGRAM|ENDHLSL|HLSLINCLUDE)\\b"
        }
      ]
    },
    "semantics": {
      "patterns": [
        {
          "name": "support.variable.semantic.hlsl",
          "match": "\\b(SV_Position|SV_ClipDistance|SV_CullDistance|SV_RenderTargetArrayIndex|SV_ViewportArrayIndex|SV_VertexID|SV_InstanceID|SV_PrimitiveID|SV_IsFrontFace|SV_SampleIndex|SV_GSInstanceID|SV_OutputControlPointID|SV_DomainLocation|SV_TessFactor|SV_InsideTessFactor|SV_Depth|SV_DepthGreaterEqual|SV_DepthLessEqual|SV_Target|SV_Target0|SV_Target1|SV_Target2|SV_Target3|SV_Coverage|SV_DispatchThreadID|SV_GroupID|SV_GroupIndex|SV_GroupThreadID)\\b"
        },
        {
          "name": "support.variable.semantic.unity.hlsl",
          "match": "\\b(POSITION[0-9]?|NORMAL[0-9]?|TANGENT[0-9]?|COLOR[0-9]?|TEXCOORD[0-9]?|BLENDWEIGHT|BLENDINDICES|VPOS|VFACE|PSIZE|FOG|DEPTH)\\b"
        }
      ]
    },
    "struct_definition": {
      "patterns": [
        {
          "name": "meta.struct.hlsl",
          "begin": "\\b(struct)\\s+([a-zA-Z_]\\w*)\\s*\\{",
          "beginCaptures": {
            "1": {"name": "storage.type.hlsl"},
            "2": {"name": "entity.name.type.struct.hlsl"}
          },
          "end": "\\}",
          "patterns": [
            {"include": "#comments"},
            {"include": "#types"},
            {"include": "#semantics"},
            {
              "name": "meta.struct.member.hlsl",
              "match": "([a-zA-Z_]\\w*)\\s+([a-zA-Z_]\\w*)\\s*(?::\\s*([a-zA-Z_]\\w*))?",
              "captures": {
                "1": {"name": "storage.type.hlsl"},
                "2": {"name": "variable.other.member.hlsl"},
                "3": {"name": "support.variable.semantic.hlsl"}
              }
            }
          ]
        }
      ]
    },
    "function_definition": {
      "patterns": [
        {
          "name": "meta.function.hlsl",
          "match": "([a-zA-Z_]\\w*)\\s+([a-zA-Z_]\\w*)\\s*\\(",
          "captures": {
            "1": {"name": "storage.type.hlsl"},
            "2": {"name": "entity.name.function.hlsl"}
          }
        }
      ]
    },
    "keywords": {
      "patterns": [
        {
          "name": "keyword.control.hlsl",
          "match": "\\b(if|else|for|while|do|switch|case|default|break|continue|return|discard)\\b"
        },
        {
          "name": "storage.modifier.hlsl",
          "match": "\\b(const|static|extern|volatile|inline|noinline|uniform|shared|groupshared|linear|centroid|nointerpolation|noperspective|sample|snorm|unorm|precise|row_major|column_major)\\b"
        },
        {
          "name": "storage.type.hlsl",
          "match": "\\b(struct|typedef|cbuffer|tbuffer|register|packoffset)\\b"
        },
        {
          "name": "keyword.other.hlsl",
          "match": "\\b(technique|pass|vertexshader|pixelshader|geometryshader|hullshader|domainshader|compute|compile)\\b"
        }
      ]
    },
    "types": {
      "patterns": [
        {
          "name": "support.type.basic.hlsl",
          "match": "\\b(void|bool|int|uint|dword|half|float|double|min16float|min10float|min16int|min12int|min16uint)\\b"
        },
        {
          "name": "support.type.vector.hlsl",
          "match": "\\b(bool[234]|int[234]|uint[234]|half[234]|float[234]|double[234]|min16float[234]|min10float[234]|min16int[234]|min12int[234]|min16uint[234])\\b"
        },
        {
          "name": "support.type.matrix.hlsl",
          "match": "\\b(float[234]x[234]|half[234]x[234]|double[234]x[234]|bool[234]x[234]|int[234]x[234]|uint[234]x[234])\\b"
        },
        {
          "name": "support.type.object.hlsl",
          "match": "\\b(vector|matrix|string|Texture1D|Texture1DArray|Texture2D|Texture2DArray|Texture3D|TextureCube|TextureCubeArray|Texture2DMS|Texture2DMSArray|RWTexture1D|RWTexture1DArray|RWTexture2D|RWTexture2DArray|RWTexture3D|SamplerState|SamplerComparisonState|Buffer|RWBuffer|StructuredBuffer|RWStructuredBuffer|ByteAddressBuffer|RWByteAddressBuffer|AppendStructuredBuffer|ConsumeStructuredBuffer|InputPatch|OutputPatch|PointStream|LineStream|TriangleStream)\\b"
        },
        {
          "name": "support.type.unity.hlsl",
          "match": "\\b(fixed|fixed[234]|sampler|sampler1D|sampler2D|sampler3D|samplerCUBE)\\b"
        }
      ]
    },
    "constants": {
      "patterns": [
        {
          "name": "constant.language.hlsl",
          "match": "\\b(true|false|NULL)\\b"
        }
      ]
    },
    "operators": {
      "patterns": [
        {
          "name": "keyword.operator.hlsl",
          "match": "\\+\\+|--|\\+|\\-|\\*|\\/|%|==|!=|<=|>=|<|>|&&|\\|\\||!|&|\\||\\^|~|<<|>>|\\+=|\\-=|\\*=|\\/=|%=|&=|\\|=|\\^=|<<=|>>=|=|\\?|:"
        }
      ]
    },
    "numbers": {
      "patterns": [
        {
          "name": "constant.numeric.hex.hlsl",
          "match": "\\b0[xX][0-9a-fA-F]+[uUlL]*\\b"
        },
        {
          "name": "constant.numeric.float.hlsl",
          "match": "\\b[0-9]*\\.[0-9]+([eE][+-]?[0-9]+)?[fFhHlL]?\\b"
        },
        {
          "name": "constant.numeric.integer.hlsl",
          "match": "\\b[0-9]+[uUlL]*\\b"
        }
      ]
    },
    "strings": {
      "patterns": [
        {
          "name": "string.quoted.double.hlsl",
          "begin": "\"",
          "end": "\"",
          "patterns": [
            {
              "name": "constant.character.escape.hlsl",
              "match": "\\\\."
            }
          ]
        }
      ]
    }
  }
}
